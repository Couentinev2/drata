Architectural DecisionsTechnology StackNext.js 16 (App Router)Server-side rendering and static generationReact Server Components for reduced client JSBuilt-in API routes and image optimizationBuilder.ioVisual page builder for non-technical usersComponent-based architectureAPI-driven content deliveryTailwind CSSUtility-first stylingFast development and small bundle sizeTypeScriptType safety and better developer experienceArchitecture PatternsHybrid RenderingSSR (default): Server fetches Builder.io content and renders HTMLCSR (editor/preview): Client component polls Builder.io API every 1.2s for live updatesComponent RegistrationCustom React components registered with Builder.ioConfigurable props exposed through Builder.io inputsAPI Route PatternChat functionality in `/api/chat` routeKeeps backend logic separate from frontendStreaming ResponsesChat API uses ReadableStream for word-by-word responses---Data FlowPage Rendering```User Request → Next.js Server  ↓Check for Builder.io Editor/Preview Mode  ├─ YES → BuilderPreviewClient (CSR)  │         └─ Polls Builder.io API every 1.2s  │  └─ NO → Server-Side Fetch          ├─ Cache Check (5s revalidation)          ├─ Fetch via Builder.io SDK          └─ Render Server Component```AI Chat Flow```User Message → AiAssistant Component  ↓POST /api/chat  ↓API Route Handler  ├─ Parse message  ├─ Keyword matching  ├─ Generate response  └─ Stream via ReadableStream  ↓Client receives stream  ├─ Decode chunks  ├─ Update UI incrementally  └─ Display message```Builder.io Content Delivery```Builder.io Cloud  ↓Next.js Server (SSR)  ├─ Cache Layer (5s revalidation)  └─ Render to HTML  ↓Browser  └─ Hydrate React Components```---Caching StrategyMulti-Layer Caching1. Next.js ISR (Incremental Static Regeneration)Location: `app/[[...page]]/page.tsx`Configuration: `export const revalidate = 5`Pages statically generated, revalidated every 5 secondsBenefits: Fast CDN responses, fresh content, reduced API calls2. Builder.io SDK CachingBuilt-in caching in SDKInvalidated when:`builder.preview` query param present`builder.editor` query param present`builder.noCache` or `builder.cachebust` present3. Browser CachingNext.js sets appropriate cache headersStatic assets cached long-termHTML respects revalidation strategy4. CDN Caching (Vercel)Edge network caches globallyAuto-invalidated on deploymentsCache InvalidationAutomatic:On deployment (Vercel clears cache)After 5s revalidation periodManual:Builder.io webhook integration (can invalidate on content updates)Vercel API for programmatic clearingEditor/Preview Mode:Bypasses all cachesUses `cachebust: true` and `includeUnpublished: true`